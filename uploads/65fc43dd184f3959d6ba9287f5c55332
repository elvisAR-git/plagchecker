<!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8">

<head>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">

  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous">
  </script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <title>Welcome to Node.js</title>
</head>

<body>
  <!-- styles -->

  <style>
    input[type=submit] {
      width: 100em;
    }

    #invalid_credentials {
      display: none;
    }

    input[type=text],
    input[type=password] {
      width: 100%;
      padding: 12px 20px;
      margin: 8px 0;
      display: inline-block;
      border: 1px solid #0c92eb;
      border-radius: 5px;
      box-sizing: border-box;
    }
  </style>
  <div style="background:  #563d7c !important; color: white;" class="row mb-2">
    <center>
      <h1><u>Login Page</u></h1>
      <p>Please enter your username and password. Both are case sensitive.</p>
    </center>
  </div>
  <div class="col-md-1"></div>
  <div class="col-md-10 container shadow p-2">
    <form action="/sendLoginDetails" method="post">
      <p id=invalid_credentials>
        <font color="red">Invalid credentials. Please try again!</font>
      </p>
      <label for="username"><b>Username:</b></label><br>
      <input type="text" placeholder="Username" name="username" size="150" required>
      <br>
      <label for="psw"><b>Password:</b></label><br>
      <input type="password" placeholder="Password" name="psw" size="150" required><br>
      <button id="myButton" type="submit" size="150" class="btn btn-primary btn-block"
        onclick="location.href ='/sendLoginDetails'"> Log In</button>

      <script type="text/javascript">
        var xmlhttp = new XMLHttpRequest();
        var url = "/getStatus";
        xmlhttp.onreadystatechange = function () {
          if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            var true_value = xmlhttp.responseText;
            myFunction(true_value);
          }
        }
        xmlhttp.open("GET", url, true);
        xmlhttp.send();

        function myFunction(true_value) {
          var x = document.getElementById("invalid_credentials");

          if (true_value == '1') {
            x.style.display = "block";
          } else {
            x.style.display = "none";
          }
        }
      </script>
</body>

</html>